% \RequirePackage{float} % Need to load the float package before hyperref, so hyperref detects and patches it, so when we load minted later it uses the patched \newfloat (minted loads float). More info here: http://tex.stackexchange.com/questions/19371/minteds-listing-environment-with-hyperref-and-caption-package-together

% % Need to do this before
% \makeatletter
% \renewcommand*{\listof}[2]{%
%   \@ifundefined{ext@#1}{\float@error{#1}}{%
%     \expandafter\let\csname l@#1\endcsname \l@figure  % <- use layout of figure
%     \float@listhead{#2}%
%     \begingroup
%       \setlength\parskip{0pt plus 1pt}%               % <- or drop this line completely
%       \@starttoc{\@nameuse{ext@#1}}%
%     \endgroup}}
% \makeatother

% Need to do this before loading hyperref and minted ??
% But can't do this before \documentclass{book} (because it doesn't work then..)
% \RequirePackage{etoolbox}
% \makeatletter
% \patchcmd{\@chapter}%
%  {\addtocontents{lof}}%
%  {\addtocontents{lol}{\protect\addvspace{10pt}}%  % <-- "alg" is the extension you use
%   \addtocontents{lof}}%
%  {\typeout{*** SUCCESS ***}}{\typeout{*** FAIL ***}}
% \makeatother

\documentclass[twoside,english,a4paper]{uiofysmaster}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
% \usepackage[top=1.5in, bottom=1.5in, left=1in, right=1in]{geometry} % Correct geometry in uiofysmaster

\input{preamble.tex}
\input{other_packages.tex}
\input{custom_commands_and_settings.tex}

% % \usepackage{float}
% \makeatletter
% \renewcommand*{\listof}[2]{%
%   \@ifundefined{ext@#1}{\float@error{#1}}{%
%     \expandafter\let\csname l@#1\endcsname \l@figure  % <- use layout of figure
%     \float@listhead{#2}%
%     \begingroup
%       \setlength\parskip{0pt plus 1pt}%               % <- or drop this line completely
%       \@starttoc{\@nameuse{ext@#1}}%
%     \endgroup}}
% \makeatother


\author{Filip Sund}
\title{\uppercase{Water confined in nanoporous media}}
\date{June 2014}

% TODO:
% Decide on caption skips (see preamble)

% \includeonly{molecular_dynamics/simulations}
% \includeonly{fractures/fractures}
\begin{document}

\pagenumbering{roman}
\includepdf{frontpage.pdf}
\cleardoublepage

\include{abstract}
\include{dedications}
\include{acknowledgements}

\tableofcontents

\listoffigures
\listoftables
\listoflistings

\include{introduction}

\part{Molecular dynamics}
    \include{molecular_dynamics/introduction}
    \include{molecular_dynamics/statistical_mechanics}
    \include{molecular_dynamics/simulations}
    \include{molecular_dynamics/measurements}

\part{Fractures}
    \include{fractures/fractures}

\part{Results}
    \include{results/results}

\part{Discussion}

\part{Appendices}
\begin{appendix}
    \include{appendices/md_units}
    \include{appendices/integrators}
    \include{appendices/pressure}
    \include{appendices/sio_potential}
\end{appendix}

\printbibliography

\end{document}
